name: Deploy
on:
  push:
    # branches:
    #   - master
jobs:
  Python:
    runs-on: ubuntu-latest
    steps:
      - name: Ensure pip
        run: pip install pip --upgrade
      - name: Ensure build
        run: pip install build --upgrade
      - name: Ensure twine
        run: pip install twine --upgrade
      - name: Check out repository code
        uses: actions/checkout@v3
      # Calculate version
      - name: Output Run ID
        run: echo ${{ github.run_id }}
      - name: Output Run Number
        run: echo ${{ github.run_number }}
      - name: Output Run Attempt
        run: echo ${{ github.run_attempt }}
      - name: Calculate version
        run: |
          version=$(cat version.txt)
          patch=$(git rev-list --count $(git log --follow -1 --pretty=%H version.txt)..HEAD)
          build=${{ github.run_attempt }}

          echo "PACKAGE_VERSION=$version.$patch" >> $GITHUB_ENV
          echo "BUILD_NUMBER=$build" >> $GITHUB_ENV
      # Build
      # Upload to Pypi through twine
